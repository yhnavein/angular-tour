!function(a,b,c){"use strict";angular.module("angular-tour",["angular-tour.tour"]),angular.module("angular-tour.tour",[]).constant("tourConfig",{placement:"top",animation:!0,nextLabel:"Next",scrollSpeed:500,offset:28,backDrop:!1,useSourceScope:!1,containerElement:"body"}).controller("TourController",["$scope","orderedList",function(a,b){var c=this,d=c.steps=b();c.postTourCallback=angular.noop,c.postStepCallback=angular.noop,c.showStepCallback=angular.noop,c.currentStep=-1,a.$watch(function(){return c.currentStep},function(a){c.select(a)}),c.select=function(a){if(angular.isNumber(a)){c.unselectAllSteps();var b=d.get(a);b&&(b.ttOpen=!0),c.currentStep!==a&&(c.currentStep=a),c.currentStep>-1&&c.showStepCallback(),a>=d.getCount()&&c.postTourCallback(!0),c.postStepCallback()}},c.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)?d.set(a.index,a):d.push(a)},c.unselectAllSteps=function(){d.forEach(function(a){a.ttOpen=!1})},c.cancelTour=function(){c.unselectAllSteps(),c.postTourCallback(!1)},a.openTour=function(){var a=c.currentStep>=d.getCount()||c.currentStep<0?0:c.currentStep;c.select(a)},a.closeTour=function(){c.cancelTour()}}]).directive("tour",["$parse","$timeout","tourConfig",function(a,b,c){return{controller:"TourController",restrict:"EA",scope:!0,link:function(d,e,f,g){if(!angular.isDefined(f.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";var h=a(f.step),i=!1;d.$watch(f.step,function(a){g.currentStep=a}),g.postTourCallback=function(a){angular.element(".tour-backdrop").remove(),i=!1,angular.element(".tour-element-active").removeClass("tour-element-active"),a&&angular.isDefined(f.tourComplete)&&d.$parent.$eval(f.tourComplete),angular.isDefined(f.postTour)&&d.$parent.$eval(f.postTour)},g.postStepCallback=function(){angular.isDefined(f.postStep)&&d.$parent.$eval(f.postStep)},g.showStepCallback=function(){c.backDrop&&(angular.element(c.containerElement).append(angular.element('<div class="tour-backdrop"></div>')),b(function(){$(".tour-backdrop").remove(),angular.element('<div class="tour-backdrop"></div>').insertBefore(".tour-tip")},1e3),i=!0)},d.setCurrentStep=function(a){h.assign(d.$parent,a),g.currentStep=a},d.getCurrentStep=function(){return g.currentStep}}}}]).directive("tourtip",["$window","$compile","$interpolate","$timeout","scrollTo","tourConfig",function(b,d,e,f,g,h){var i=(e.startSymbol(),e.endSymbol(),"<div tour-popup></div>");return{require:"^tour",restrict:"EA",scope:!0,link:function(e,j,k,l){function m(){var a=e.ttElement?angular.element(e.ttElement):j,b=e;return a===j||e.ttSourceScope||(b=a.scope()),b}function n(b,c){var d,f=b[0].getBoundingClientRect(),g=f.top+a.pageYOffset;c&&c[0]&&(g=g-c[0].getBoundingClientRect().top+c[0].scrollTop);var h=r.width(),i=r.height();switch(e.ttPlacement){case"right":d={top:g,left:f.left+f.width+e.ttOffset};break;case"bottom":d={top:g+f.height+e.ttOffset,left:f.left};break;case"center":d={top:g+.5*(f.height-i)+e.ttOffset,left:f.left+.5*(f.width-h)};break;case"center-top":d={top:g+.1*(f.height-i)+e.ttOffset,left:f.left+.5*(f.width-h)};break;case"left":d={top:g,left:f.left-h-e.ttOffset};break;default:d={top:g-i-e.ttOffset,left:f.left}}return d.top+="px",d.left+="px",d}function o(){if(e.ttContent){e.ttAnimation?r.fadeIn():r.css({display:"block"});var a=e.ttElement?angular.element(e.ttElement):j;if(null==a||0===a.length)throw"Target element could not be found. Selector: "+e.ttElement;angular.element(e.ttContainerElement).append(r);var d=function(){var b="body"===e.ttContainerElement?c:angular.element(e.ttContainerElement),d=n(a,b);r.css(d);var f=parseInt(d.top),i=parseInt(d.left);g(r,e.ttContainerElement,-150,-300,h.scrollSpeed,f,i)};if(h.backDrop&&q(a),angular.element(b).bind("resize."+e.$id,d),d(),e.onStepShow){var i=m();f(function(){i.$eval(e.onStepShow)},300)}}}function p(){r.detach(),angular.element(b).unbind("resize."+e.$id)}function q(a){angular.element(".tour-element-active").removeClass("tour-element-active"),e.centered||a.addClass("tour-element-active")}k.$observe("tourtip",function(a){e.ttContent=a}),k.$observe("tourtipPlacement",function(a){e.ttPlacement=(a||h.placement).toLowerCase().trim(),e.centered=0===e.ttPlacement.indexOf("center")}),k.$observe("tourtipNextLabel",function(a){e.ttNextLabel=a||h.nextLabel}),k.$observe("tourtipContainerElement",function(a){e.ttContainerElement=a||h.containerElement}),k.$observe("tourtipOffset",function(a){e.ttOffset=parseInt(a,10)||h.offset}),k.$observe("onShow",function(a){e.onStepShow=a||null}),k.$observe("onProceed",function(a){e.onStepProceed=a||null}),k.$observe("tourtipElement",function(a){e.ttElement=a||null}),k.$observe("useSourceScope",function(a){e.ttSourceScope=a?"true"===a:h.useSourceScope}),e.ttNextLabel=h.nextLabel,e.ttContainerElement=h.containerElement,e.ttPlacement=h.placement.toLowerCase().trim(),e.centered=!1,e.ttOffset=h.offset,e.ttSourceScope=h.useSourceScope,e.ttOpen=!1,e.ttAnimation=h.animation,e.index=parseInt(k.tourtipStep,10);var r=d(i)(e);l.addStep(e),f(function(){e.$watch("ttOpen",function(a){a?o():p()})},500),e.$on("$destroy",function(){angular.element(b).unbind("resize."+e.$id),r.remove(),r=null}),e.proceed=function(){if(e.onStepProceed){var a=m();f(function(){a.$eval(e.onStepProceed)},100)}e.setCurrentStep(e.getCurrentStep()+1)}}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(a,b,c){}}}).factory("orderedList",function(){var a=function(){this.map={},this._array=[]};a.prototype.set=function(a,b){if(angular.isNumber(a))if(a in this.map)this.map[a]=b;else{if(a<this._array.length){var c=a-1>0?a-1:0;this._array.splice(c,0,a)}else this._array.push(a);this.map[a]=b,this._array.sort(function(a,b){return a-b})}},a.prototype.indexOf=function(a){for(var b in this.map)if(this.map.hasOwnProperty(b)&&this.map[b]===a)return Number(b)},a.prototype.push=function(a){var b=this._array[this._array.length-1]+1||0;this._array.push(b),this.map[b]=a,this._array.sort(function(a,b){return a-b})},a.prototype.remove=function(a){var b=this._array.indexOf(a);if(-1===b)throw new Error("key does not exist");this._array.splice(b,1),delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return this._array.length},a.prototype.forEach=function(a){for(var b,c,d=0;d<this._array.length;d++)b=this._array[d],c=this.map[b],a(c,b)},a.prototype.first=function(){var a,b;return a=this._array[0],b=this.map[a]};var b=function(){return new a};return b}).factory("scrollTo",function(){return function(a,b,c,d,e,f,g){a?(c=c||-100,d=d||-100,e=e||500,$("html,"+b).stop().animate({scrollTop:f+c,scrollLeft:g+d},e)):$("html,"+b).stop().animate({scrollTop:0},e)}})}(window,document);